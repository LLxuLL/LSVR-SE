{
    "train": {
        "name": "train",
        "description": "Editing configuration for the Train model",
        "operations": {
            "common": {
                "add": {
                    "description": "Deploy a new train nearby",
                    "parameters": {
                        "direction": {
                            "type": "string",
                            "default": "right",
                            "options": ["left", "right", "front", "back"],
                            "description": "Direction to add the new train"
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "copy_mesh",
                            "parameters": {
                                "mesh": "input_mesh"
                            },
                            "output": "copied_mesh"
                        },
                        {
                            "operation": "get_bounds",
                            "parameters": {
                                "mesh": "input_mesh"
                            },
                            "output": "bounds"
                        },
                        {
                            "operation": "calculate_translation_vector",
                            "parameters": {
                                "direction": "{direction}",
                                "bounds": "bounds"
                            },
                            "output": "translation"
                        },
                        {
                            "operation": "translate_mesh",
                            "parameters": {
                                "mesh": "copied_mesh",
                                "vector": "translation"
                            },
                            "output": "translated_mesh"
                        },
                        {
                            "operation": "combine_meshes",
                            "parameters": {
                                "meshes": ["input_mesh", "translated_mesh"]
                            },
                            "output": "result_mesh"
                        }
                    ]
                },
                "rotate": {
                    "description": "Rotate the entire train on the spot",
                    "parameters": {
                        "angle": {
                            "type": "float",
                            "default": 15.0,
                            "description": "Rotation angle (in degrees)"
                        },
                        "axis": {
                            "type": "vector3d",
                            "default": [0, 1, 0],
                            "description": "Axis of rotation (Y-axis)"
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "rotate_mesh",
                            "parameters": {
                                "mesh": "input_mesh",
                                "angle": "{angle}",
                                "axis": "{axis}"
                            },
                            "output": "result_mesh"
                        }
                    ]
                },
                "scale": {
                    "description": "Scale the entire train model uniformly",
                    "parameters": {
                        "factor": {
                            "type": "float",
                            "default": 1.05,
                            "description": "Scaling factor"
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "calculate_scale_center",
                            "parameters": {
                                "mesh": "input_mesh",
                                "center_type": "origin"
                            },
                            "output": "scale_center"
                        },
                        {
                            "operation": "scale_mesh",
                            "parameters": {
                                "mesh": "input_mesh",
                                "factor": "{factor}",
                                "center": "scale_center"
                            },
                            "output": "result_mesh"
                        }
                    ]
                },
                "translate": {
                    "description": "Move the entire train's position",
                    "parameters": {
                        "vector": {
                            "type": "vector3d",
                            "default": [10, 0, 0],
                            "description": "Translation vector"
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "translate_mesh",
                            "parameters": {
                                "mesh": "input_mesh",
                                "vector": "{vector}"
                            },
                            "output": "result_mesh"
                        }
                    ]
                }
            },
            "specific": {
                "add_car": {
                    "description": "Add a new car to the end of the train.",
                    "parameters": {
                        "direction": {
                            "type": "string",
                            "default": "back",
                            "options": ["front", "back"],
                            "description": "Which end of the train to add the car to."
                        },
                        "gap": {
                            "type": "float",
                            "default": 0.2,
                            "description": "The gap between the new car and the train."
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "copy_mesh",
                            "parameters": { "mesh": "input_mesh" },
                            "output": "new_car"
                        },
                        {
                            "operation": "get_bounds",
                            "parameters": { "mesh": "input_mesh" },
                            "output": "bounds"
                        },
                        {
                            "operation": "calculate_translation_vector",
                            "parameters": {
                                "direction": "{direction}",
                                "bounds": "bounds",
                                "gap": "{gap}"
                            },
                            "output": "translation_vector"
                        },
                        {
                            "operation": "translate_mesh",
                            "parameters": {
                                "mesh": "new_car",
                                "vector": "translation_vector"
                            },
                            "output": "translated_car"
                        },
                        {
                            "operation": "combine_meshes",
                            "parameters": {
                                "meshes": ["input_mesh", "translated_car"]
                            },
                            "output": "result_mesh"
                        }
                    ]
                },
                "open_doors": {
                    "description": "Open the sliding doors of a passenger car.",
                    "parameters": {
                        "slide_distance": {
                            "type": "float",
                            "default": 1.0,
                            "description": "How far the doors should slide open."
                        },
                        "door_ratio": {
                            "type": "float",
                            "default": 0.2,
                            "description": "The proportional size of the door relative to the car's length."
                        }
                    },
                    "atomic_operations": [
                        {
                            "operation": "separate_extraction",
                            "parameters": {
                                "mesh": "input_mesh",
                                "part_name": "door",
                                "part_ratio": "{door_ratio}",
                                "based_on": "side_faces"
                            },
                            "output": ["doors", "car_body"]
                        },
                        {
                            "operation": "calculate_slide_direction",
                            "parameters": {
                                "mesh": "doors",
                                "direction": "outward",
                                "distance": "{slide_distance}"
                            },
                            "output": "slide_vector"
                        },
                        {
                            "operation": "translate_mesh",
                            "parameters": {
                                "mesh": "doors",
                                "vector": "slide_vector"
                            },
                            "output": "opened_doors"
                        },
                        {
                            "operation": "combine_meshes",
                            "parameters": {
                                "meshes": ["car_body", "opened_doors"]
                            },
                            "output": "result_mesh"
                        }
                    ]
                }
            }
        }
    }
}
